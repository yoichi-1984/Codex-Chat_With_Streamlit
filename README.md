Codex-chat: AIコーディングアシスタント
概要
このプロジェクトは、Streamlitフレームワークを使用して構築された、Azure OpenAIの「codex-mini」モデル専用のチャットボットです。「codex-mini」は、コーディングおよびCLIタスクに特化した高性能なファインチューンモデルです。

本アプリケーションは、従来のチャット形式の対話に加え、複数のコードブロック（Canvas）をコンテキストとしてAIに提供できる「マルチコード」機能を搭載しています。これにより、既存のコードのレビュー、デバッグ、機能追加など、より複雑なコーディング作業を効率的に行えます。

特徴
codex-miniに最適化: Responses APIに特化した入出力フォーマットを採用し、モデルの性能を最大限に引き出します。

マルチコード機能: サイドバーから複数のPythonコードエディタ（Canvas）を有効にでき、一度に複数のコードを参照しながら対話できます。

会話履歴の保存・読み込み: JSONファイル形式でチャット履歴を保存・読み込みできます。

環境変数による設定: APIキーやエンドポイントなどの機密情報を.envファイルで管理します。

トークン使用量の表示: 各応答のトークン使用量と累計使用量をリアルタイムで確認できます。

必要な環境
本アプリケーションをローカルで実行するには、以下の要件を満たす必要があります。

Python 3.8以上

Azure OpenAIサービスへのアクセス: デプロイされた「codex-mini」モデルが必要です。

セットアップ方法
リポジトリをクローン:

git clone [プロジェクトのURL]
cd [プロジェクトディレクトリ]

仮想環境の作成と有効化 (推奨):

python -m venv venv
# Windows
.\venv\Scripts\activate
# macOS/Linux
source venv/bin/activate

依存ライブラリのインストール:
requirements.txtファイルを使用して、必要なライブラリをインストールします。

pip install -r requirements.txt

環境変数の設定:
envディレクトリ内にcodex.envという名前のファイルを作成し、以下の情報を記述します。

AZURE_OPENAI_KEY="あなたのAzure OpenAIのAPIキー"
AZURE_OPENAI_ENDPOINT="あなたのAzure OpenAIのエンドポイントURL"
AZURE_OPENAI_DEPLOYMENT="デプロイされたcodex-miniのモデル名"
AZURE_OPENAI_API_VERSION="モデルのAPIバージョン (例: 2025-01-01-preview)"

アプリケーションの実行:
Streamlitコマンドでアプリを起動します。

streamlit run app.py

使い方
AIの役割設定: 最初の画面で、AIの役割を定義するシステムプロンプトを入力し、「この役割でチャットを開始する」ボタンをクリックします。

対話: 画面下部の入力ボックスに、シェルコマンドの生成やスクリプト作成の指示を入力します。

コードの利用: サイドバーの「Pythonコードエディタ」セクションにコードを記述すると、そのコードがAIへの入力コンテキストとして自動的に含まれます。

マルチコード: 「マルチコードを有効にする」にチェックを入れると、複数のコードエディタを追加できます。

履歴: サイドバーから会話履歴をJSON形式でダウンロードしたり、読み込んだりできます。